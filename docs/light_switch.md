# Light_Switch

불을 켜고 끄며 장애물을 넘어 생존하는 게임

<br/>

## Index

> - [2023.01.](#202301)

<br/>

### 기획

> 12년전, 초등학생 시절에 만들었던 게임 중에 캐릭터의 색을 바꿔가며 해당 캐릭터의 색과 같은 색의 벽이 장애물이 되는 게임이 있었다.  
> 갑자기 떠오른 이 게임으로, 같은 방식의 게임을 새로 만들어 볼 수 있겠다는 생각이 들었다.  
> 그와 함께 *[Charlie Puth - Light Switch](https://youtu.be/WFsAon_TWPQ)*로부터 빛을 활용하면 어떨까라는 생각을 하였다.
>
> 장애물의 종류는 2가지로 검은색과 흰색이다.  
> 불이 켜진 상태에서는 검은선만 보이고 이것만이 장애물 판정을 받는다.  
> 반대로 불이 꺼진 상태에서는 흰색만 보이며 이것만이 장애물 판정을 받는다.  
> 플레이어를 움직이도록 한다면 불을 켜고 끌 때 운이 없으면 갑자기 생겨난 장애물에 탈락하게 될 수도 있다.  
> 플레이어를 고정시켜 놓고 상하좌우에서 장애물이 절대 피할 수 없는 상황을 만들지 않도록 하며 랜덤하게 등장시킬 예정이다.

<br/>

## 2023.01.20.

> **draw_switch.js**
> 라이트 스위치 드로잉 메소드를 구현하였다.  
> 버튼을 눌렀을 때의 오브젝트 외형 변화 및 배경의 변화 또한 구현하였다.
>
> **문제**
>
> > 라이트 스위치를 화면 중앙에 배치하니 점수 및 click to start의 위치가 부적절하였다.  
> > 또한 불을 켜고 끌 때마다 click to start와 circleEffector의 색상이 바뀌어야 했다.
>
> **해결**
>
> > Text.js와 CircleEffector.js의 기능을 확장하였다. [[자세히]](./essential.md/#20230120)
>
> 플레이어 오브젝트는 따로 구현하지 않고 화면 중앙의 좌표값을 플레이어의 위치로 사용한다.  
> CircleEffector가 그리는 원을 플레이어의 스프라이트로 사용한다.  
> 클릭 시마다 배경은 반전되고 CircleEffector의 색 또한 반전되도록 하였다.
>
> 스위치에 **o**,**-** 기호를 넣어 직관성을 높인다.  
> 각 기호를 그릴 때, 스위치는 일부가 기울어져 있다.  
> 이를 구현하기 위해 **o**를 그릴 때, **o**가 기울어져 있는 경우 캔버스의 크기를 비율로 줄여 원이 기울어져 있는 듯함을 연출하였다.  
> **-**는 단순히 길이를 조정하였다.
> 플레이어의 스프라이트 역할은 **o**가 하므로 **o**의 색을 강조시켰다.
>
> **Line.js**
> 장애물 오브젝트이다.  
> Line.js 객체는 속도, 방향, 시간 변수를 생성자로 호출하여 각 방향에 따른 장애물 오브젝트들을 형성한다.
> 이 오브젝트는 굉장히 얇게 그려진다. 이에 의해 속도가 빨라진다면 충돌했어야 함에도 충돌하지 않았다고 판정될 수 있다.  
> 이를 해결하기 위해 이 오브젝트의 충돌은 스프라이트의 크기값을 연산하지 않고, 좌표로 연산한다.  
> 오브젝트가 생성되는 좌표값을 해당 오브젝트의 속도, 중앙에 도달할 시간, 중앙 좌표값을 통해 연산하여 속도에 상관없이 무조건 화면의 중앙 좌표값을 도달할 수 있도록 구현하였다.
>
> ```
> this.speed = Math.ceil(canvas.height / speedDivisor);
> this.y = canvas.height/2 + time*this.speed;
> this.dy = -this.speed;
> ```
>
> 일정한 시간마다 Line오브젝트가 생성되도록 하였다.
